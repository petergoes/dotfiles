#!/bin/bash

PACKAGE_MANAGER=

if [ "$1" == "brew" ] || [ "$1" == "homebrew" ]; then
   # PACKAGE_MANAGER="brew install"
   PACKAGE_MANAGER="echo"
elif [ "$1" == 'apt' ]; then
    PACKAGE_MANAGER="apt install -y"
else
    echo "Please specify a package manager"
    exit 1
fi

installHomebrew() {
    echo
    echo "Install Homebrew"
    # /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
}

installCliTools() {
    echo
    echo "Install Cli Tools with $PACKAGE_MANAGER"

    while read tool; do
        IFS=' '; VALUE=($tool); unset IFS;
        IFS=','; TOOL=(${VALUE[0]}); unset IFS;

        if [ -z ${TOOL[1]+x} ]; then
            BIN_NAME=${TOOL[0]};
        else
            BIN_NAME=${TOOL[1]}
        fi

        echo
        if which ${BIN_NAME}; then
            echo "already installed"
            continue
        else
            echo "Install ${TOOL[0]}"
        fi

        if [ -z ${VALUE[1]+x} ]; then
            $PACKAGE_MANAGER ${TOOL[0]}
        else
            curl -sS ${VALUE[1]} | sh
        fi
    done < ./script/cli-tools
}
